/*!
 * Zfont v1.2.7
 * Text plugin for Zdog
 * 2019 James Daniel
 * MIT Licensed 
 * github.com/jaames/zfont
 */
var r={parse:function(t){var e=r._bin,a=new Uint8Array(t),n=0;e.readFixed(a,n);n+=4;var o=e.readUshort(a,n);n+=2;e.readUshort(a,n);n+=2;e.readUshort(a,n);n+=2;e.readUshort(a,n);n+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:a},h={},f=0;f<o;f++){var l=e.readASCII(a,n,4);n+=4;e.readUint(a,n);n+=4;var u=e.readUint(a,n);n+=4;var d=e.readUint(a,n);n+=4,h[l]={offset:u,length:d}}for(f=0;f<i.length;f++){var c=i[f];h[c]&&(s[c.trim()]=r[c.trim()].parse(a,h[c].offset,h[c].length,s))}return s},_tabOffset:function(t,e){for(var a=r._bin,n=a.readUshort(t,4),o=12,i=0;i<n;i++){var s=a.readASCII(t,o,4);o+=4;a.readUint(t,o);o+=4;var h=a.readUint(t,o);o+=4;a.readUint(t,o);if(o+=4,s==e)return h}return 0}};r._bin={readFixed:function(r,t){return(r[t]<<8|r[t+1])+(r[t+2]<<8|r[t+3])/65540},readF2dot14:function(t,e){return r._bin.readShort(t,e)/16384},readInt:function(t,e){var a=r._bin.t.uint8;return a[0]=t[e+3],a[1]=t[e+2],a[2]=t[e+1],a[3]=t[e],r._bin.t.int32[0]},readInt8:function(t,e){return r._bin.t.uint8[0]=t[e],r._bin.t.int8[0]},readShort:function(t,e){var a=r._bin.t.uint8;return a[1]=t[e],a[0]=t[e+1],r._bin.t.int16[0]},readUshort:function(r,t){return r[t]<<8|r[t+1]},readUshorts:function(t,e,a){for(var n=[],o=0;o<a;o++)n.push(r._bin.readUshort(t,e+2*o));return n},readUint:function(t,e){var a=r._bin.t.uint8;return a[3]=t[e],a[2]=t[e+1],a[1]=t[e+2],a[0]=t[e+3],r._bin.t.uint32[0]},readUint64:function(t,e){return 4294967296*r._bin.readUint(t,e)+r._bin.readUint(t,e+4)},readASCII:function(r,t,e){for(var a="",n=0;n<e;n++)a+=String.fromCharCode(r[t+n]);return a},readUnicode:function(r,t,e){for(var a="",n=0;n<e;n++){var o=r[t++]<<8|r[t++];a+=String.fromCharCode(o)}return a},_tdec:window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,a){var n=r._bin._tdec;return n&&0==e&&a==t.length?n.decode(t):r._bin.readASCII(t,e,a)},readBytes:function(r,t,e){for(var a=[],n=0;n<e;n++)a.push(r[t+n]);return a},readASCIIArray:function(r,t,e){for(var a=[],n=0;n<e;n++)a.push(String.fromCharCode(r[t+n]));return a}},r._bin.t={buff:new ArrayBuffer(8)},r._bin.t.int8=new Int8Array(r._bin.t.buff),r._bin.t.uint8=new Uint8Array(r._bin.t.buff),r._bin.t.int16=new Int16Array(r._bin.t.buff),r._bin.t.uint16=new Uint16Array(r._bin.t.buff),r._bin.t.int32=new Int32Array(r._bin.t.buff),r._bin.t.uint32=new Uint32Array(r._bin.t.buff),r._lctf={},r._lctf.parse=function(t,e,a,n,o){var i=r._bin,s={},h=e;i.readFixed(t,e);e+=4;var f=i.readUshort(t,e);e+=2;var l=i.readUshort(t,e);e+=2;var u=i.readUshort(t,e);return e+=2,s.scriptList=r._lctf.readScriptList(t,h+f),s.featureList=r._lctf.readFeatureList(t,h+l),s.lookupList=r._lctf.readLookupList(t,h+u,o),s},r._lctf.readLookupList=function(t,e,a){var n=r._bin,o=e,i=[],s=n.readUshort(t,e);e+=2;for(var h=0;h<s;h++){var f=n.readUshort(t,e);e+=2;var l=r._lctf.readLookupTable(t,o+f,a);i.push(l)}return i},r._lctf.readLookupTable=function(t,e,a){var n=r._bin,o=e,i={tabs:[]};i.ltype=n.readUshort(t,e),e+=2,i.flag=n.readUshort(t,e),e+=2;var s=n.readUshort(t,e);e+=2;for(var h=0;h<s;h++){var f=n.readUshort(t,e);e+=2;var l=a(t,i.ltype,o+f);i.tabs.push(l)}return i},r._lctf.numOfOnes=function(r){for(var t=0,e=0;e<32;e++)0!=(r>>>e&1)&&t++;return t},r._lctf.readClassDef=function(t,e){var a=r._bin,n=[],o=a.readUshort(t,e);if(e+=2,1==o){var i=a.readUshort(t,e);e+=2;var s=a.readUshort(t,e);e+=2;for(var h=0;h<s;h++)n.push(i+h),n.push(i+h),n.push(a.readUshort(t,e)),e+=2}if(2==o){var f=a.readUshort(t,e);e+=2;for(h=0;h<f;h++)n.push(a.readUshort(t,e)),e+=2,n.push(a.readUshort(t,e)),e+=2,n.push(a.readUshort(t,e)),e+=2}return n},r._lctf.getInterval=function(r,t){for(var e=0;e<r.length;e+=3){var a=r[e],n=r[e+1];r[e+2];if(a<=t&&t<=n)return e}return-1},r._lctf.readValueRecord=function(t,e,a){var n=r._bin,o=[];return o.push(1&a?n.readShort(t,e):0),e+=1&a?2:0,o.push(2&a?n.readShort(t,e):0),e+=2&a?2:0,o.push(4&a?n.readShort(t,e):0),e+=4&a?2:0,o.push(8&a?n.readShort(t,e):0),e+=8&a?2:0,o},r._lctf.readCoverage=function(t,e){var a=r._bin,n={};n.fmt=a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);return e+=2,1==n.fmt&&(n.tab=a.readUshorts(t,e,o)),2==n.fmt&&(n.tab=a.readUshorts(t,e,3*o)),n},r._lctf.coverageIndex=function(t,e){var a=t.tab;if(1==t.fmt)return a.indexOf(e);if(2==t.fmt){var n=r._lctf.getInterval(a,e);if(-1!=n)return a[n+2]+(e-a[n])}return-1},r._lctf.readFeatureList=function(t,e){var a=r._bin,n=e,o=[],i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var h=a.readASCII(t,e,4);e+=4;var f=a.readUshort(t,e);e+=2,o.push({tag:h.trim(),tab:r._lctf.readFeatureTable(t,n+f)})}return o},r._lctf.readFeatureTable=function(t,e){var a=r._bin;a.readUshort(t,e);e+=2;var n=a.readUshort(t,e);e+=2;for(var o=[],i=0;i<n;i++)o.push(a.readUshort(t,e+2*i));return o},r._lctf.readScriptList=function(t,e){var a=r._bin,n=e,o={},i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var h=a.readASCII(t,e,4);e+=4;var f=a.readUshort(t,e);e+=2,o[h.trim()]=r._lctf.readScriptTable(t,n+f)}return o},r._lctf.readScriptTable=function(t,e){var a=r._bin,n=e,o={},i=a.readUshort(t,e);e+=2,o.default=r._lctf.readLangSysTable(t,n+i);var s=a.readUshort(t,e);e+=2;for(var h=0;h<s;h++){var f=a.readASCII(t,e,4);e+=4;var l=a.readUshort(t,e);e+=2,o[f.trim()]=r._lctf.readLangSysTable(t,n+l)}return o},r._lctf.readLangSysTable=function(t,e){var a=r._bin,n={};a.readUshort(t,e);e+=2,n.reqFeature=a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);return e+=2,n.features=a.readUshorts(t,e,o),n},r.CFF={},r.CFF.parse=function(t,e,a){var n=r._bin;(t=new Uint8Array(t.buffer,e,a))[e=0],t[++e],t[++e],t[++e];e++;var o=[];e=r.CFF.readIndex(t,e,o);for(var i=[],s=0;s<o.length-1;s++)i.push(n.readASCII(t,e+o[s],o[s+1]-o[s]));e+=o[o.length-1];var h=[];e=r.CFF.readIndex(t,e,h);var f=[];for(s=0;s<h.length-1;s++)f.push(r.CFF.readDict(t,e+h[s],e+h[s+1]));e+=h[h.length-1];var l=f[0],u=[];e=r.CFF.readIndex(t,e,u);var d=[];for(s=0;s<u.length-1;s++)d.push(n.readASCII(t,e+u[s],u[s+1]-u[s]));if(e+=u[u.length-1],r.CFF.readSubrs(t,e,l),l.CharStrings){e=l.CharStrings;u=[];e=r.CFF.readIndex(t,e,u);var c=[];for(s=0;s<u.length-1;s++)c.push(n.readBytes(t,e+u[s],u[s+1]-u[s]));l.CharStrings=c}l.Encoding&&(l.Encoding=r.CFF.readEncoding(t,l.Encoding,l.CharStrings.length)),l.charset&&(l.charset=r.CFF.readCharset(t,l.charset,l.CharStrings.length)),l.Private&&(e=l.Private[1],l.Private=r.CFF.readDict(t,e,e+l.Private[0]),l.Private.Subrs&&r.CFF.readSubrs(t,e+l.Private.Subrs,l.Private));var v={};for(var p in l)-1!=["FamilyName","FullName","Notice","version","Copyright"].indexOf(p)?v[p]=d[l[p]-426+35]:v[p]=l[p];return v},r.CFF.readSubrs=function(t,e,a){var n=r._bin,o=[];e=r.CFF.readIndex(t,e,o);var i,s=o.length;i=s<1240?107:s<33900?1131:32768,a.Bias=i,a.Subrs=[];for(var h=0;h<o.length-1;h++)a.Subrs.push(n.readBytes(t,e+o[h],o[h+1]-o[h]))},r.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],r.CFF.glyphByUnicode=function(r,t){for(var e=0;e<r.charset.length;e++)if(r.charset[e]==t)return e;return-1},r.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:r.CFF.glyphByUnicode(t,r.CFF.tableSE[e])},r.CFF.readEncoding=function(t,e,a){r._bin;var n=[".notdef"],o=t[e];if(e++,0!=o)throw"error: unknown encoding format: "+o;var i=t[e];e++;for(var s=0;s<i;s++)n.push(t[e+s]);return n},r.CFF.readCharset=function(t,e,a){var n=r._bin,o=[".notdef"],i=t[e];if(e++,0==i)for(var s=0;s<a;s++){var h=n.readUshort(t,e);e+=2,o.push(h)}else{if(1!=i&&2!=i)throw"error: format: "+i;for(;o.length<a;){h=n.readUshort(t,e);e+=2;var f=0;1==i?(f=t[e],e++):(f=n.readUshort(t,e),e+=2);for(s=0;s<=f;s++)o.push(h),h++}}return o},r.CFF.readIndex=function(t,e,a){var n=r._bin,o=n.readUshort(t,e),i=t[e+=2];if(e++,1==i)for(var s=0;s<o+1;s++)a.push(t[e+s]);else if(2==i)for(s=0;s<o+1;s++)a.push(n.readUshort(t,e+2*s));else if(3==i)for(s=0;s<o+1;s++)a.push(16777215&n.readUint(t,e+3*s-1));else if(0!=o)throw"unsupported offset size: "+i+", count: "+o;return(e+=(o+1)*i)-1},r.CFF.getCharString=function(t,e,a){var n=r._bin,o=t[e],i=t[e+1],s=(t[e+2],t[e+3],t[e+4],1),h=null,f=null;o<=20&&(h=o,s=1),12==o&&(h=100*o+i,s=2),21<=o&&o<=27&&(h=o,s=1),28==o&&(f=n.readShort(t,e+1),s=3),29<=o&&o<=31&&(h=o,s=1),32<=o&&o<=246&&(f=o-139,s=1),247<=o&&o<=250&&(f=256*(o-247)+i+108,s=2),251<=o&&o<=254&&(f=256*-(o-251)-i-108,s=2),255==o&&(f=n.readInt(t,e+1)/65535,s=5),a.val=null!=f?f:"o"+h,a.size=s},r.CFF.readCharString=function(t,e,a){for(var n=e+a,o=r._bin,i=[];e<n;){var s=t[e],h=t[e+1],f=(t[e+2],t[e+3],t[e+4],1),l=null,u=null;s<=20&&(l=s,f=1),12==s&&(l=100*s+h,f=2),19!=s&&20!=s||(l=s,f=2),21<=s&&s<=27&&(l=s,f=1),28==s&&(u=o.readShort(t,e+1),f=3),29<=s&&s<=31&&(l=s,f=1),32<=s&&s<=246&&(u=s-139,f=1),247<=s&&s<=250&&(u=256*(s-247)+h+108,f=2),251<=s&&s<=254&&(u=256*-(s-251)-h-108,f=2),255==s&&(u=o.readInt(t,e+1)/65535,f=5),i.push(null!=u?u:"o"+l),e+=f}return i},r.CFF.readDict=function(t,e,a){for(var n=r._bin,o={},i=[];e<a;){var s=t[e],h=t[e+1],f=(t[e+2],t[e+3],t[e+4],1),l=null,u=null;if(28==s&&(u=n.readShort(t,e+1),f=3),29==s&&(u=n.readInt(t,e+1),f=5),32<=s&&s<=246&&(u=s-139,f=1),247<=s&&s<=250&&(u=256*(s-247)+h+108,f=2),251<=s&&s<=254&&(u=256*-(s-251)-h-108,f=2),255==s)throw u=n.readInt(t,e+1)/65535,f=5,"unknown number";if(30==s){var d=[];for(f=1;;){var c=t[e+f];f++;var v=c>>4,p=15&c;if(15!=v&&d.push(v),15!=p&&d.push(p),15==p)break}for(var g="",U=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],m=0;m<d.length;m++)g+=U[d[m]];u=parseFloat(g)}if(s<=21)if(l=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],f=1,12==s)l=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],f=2;null!=l?(o[l]=1==i.length?i[0]:i,i=[]):i.push(u),e+=f}return o},r.cmap={},r.cmap.parse=function(t,e,a){t=new Uint8Array(t.buffer,e,a),e=0;var n=r._bin,o={};n.readUshort(t,e);e+=2;var i=n.readUshort(t,e);e+=2;var s=[];o.tables=[];for(var h=0;h<i;h++){var f=n.readUshort(t,e);e+=2;var l=n.readUshort(t,e);e+=2;var u=n.readUint(t,e);e+=4;var d="p"+f+"e"+l,c=s.indexOf(u);if(-1==c){var v;c=o.tables.length,s.push(u);var p=n.readUshort(t,u);0==p?v=r.cmap.parse0(t,u):4==p?v=r.cmap.parse4(t,u):6==p?v=r.cmap.parse6(t,u):12==p?v=r.cmap.parse12(t,u):console.log("unknown format: "+p,f,l,u),o.tables.push(v)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=c}return o},r.cmap.parse0=function(t,e){var a=r._bin,n={};n.format=a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);e+=2;a.readUshort(t,e);e+=2,n.map=[];for(var i=0;i<o-6;i++)n.map.push(t[e+i]);return n},r.cmap.parse4=function(t,e){var a=r._bin,n=e,o={};o.format=a.readUshort(t,e),e+=2;var i=a.readUshort(t,e);e+=2;a.readUshort(t,e);e+=2;var s=a.readUshort(t,e);e+=2;var h=s/2;o.searchRange=a.readUshort(t,e),e+=2,o.entrySelector=a.readUshort(t,e),e+=2,o.rangeShift=a.readUshort(t,e),e+=2,o.endCount=a.readUshorts(t,e,h),e+=2*h,e+=2,o.startCount=a.readUshorts(t,e,h),e+=2*h,o.idDelta=[];for(var f=0;f<h;f++)o.idDelta.push(a.readShort(t,e)),e+=2;for(o.idRangeOffset=a.readUshorts(t,e,h),e+=2*h,o.glyphIdArray=[];e<n+i;)o.glyphIdArray.push(a.readUshort(t,e)),e+=2;return o},r.cmap.parse6=function(t,e){var a=r._bin,n={};n.format=a.readUshort(t,e),e+=2;a.readUshort(t,e);e+=2;a.readUshort(t,e);e+=2,n.firstCode=a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);e+=2,n.glyphIdArray=[];for(var i=0;i<o;i++)n.glyphIdArray.push(a.readUshort(t,e)),e+=2;return n},r.cmap.parse12=function(t,e){var a=r._bin,n={};n.format=a.readUshort(t,e),e+=2,e+=2;a.readUint(t,e);e+=4;a.readUint(t,e);e+=4;var o=a.readUint(t,e);e+=4,n.groups=[];for(var i=0;i<o;i++){var s=e+12*i,h=a.readUint(t,s+0),f=a.readUint(t,s+4),l=a.readUint(t,s+8);n.groups.push([h,f,l])}return n},r.glyf={},r.glyf.parse=function(r,t,e,a){for(var n=[],o=0;o<a.maxp.numGlyphs;o++)n.push(null);return n},r.glyf._parseGlyf=function(t,e){var a=r._bin,n=t._data,o=r._tabOffset(n,"glyf")+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var i={};if(i.noc=a.readShort(n,o),o+=2,i.xMin=a.readShort(n,o),o+=2,i.yMin=a.readShort(n,o),o+=2,i.xMax=a.readShort(n,o),o+=2,i.yMax=a.readShort(n,o),o+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var s=0;s<i.noc;s++)i.endPts.push(a.readUshort(n,o)),o+=2;var h=a.readUshort(n,o);if(o+=2,n.length-o<h)return null;i.instructions=a.readBytes(n,o,h),o+=h;var f=i.endPts[i.noc-1]+1;i.flags=[];for(s=0;s<f;s++){var l=n[o];if(o++,i.flags.push(l),0!=(8&l)){var u=n[o];o++;for(var d=0;d<u;d++)i.flags.push(l),s++}}i.xs=[];for(s=0;s<f;s++){var c=0!=(2&i.flags[s]),v=0!=(16&i.flags[s]);c?(i.xs.push(v?n[o]:-n[o]),o++):v?i.xs.push(0):(i.xs.push(a.readShort(n,o)),o+=2)}i.ys=[];for(s=0;s<f;s++){c=0!=(4&i.flags[s]),v=0!=(32&i.flags[s]);c?(i.ys.push(v?n[o]:-n[o]),o++):v?i.ys.push(0):(i.ys.push(a.readShort(n,o)),o+=2)}var p=0,g=0;for(s=0;s<f;s++)p+=i.xs[s],g+=i.ys[s],i.xs[s]=p,i.ys[s]=g}else{var U;i.parts=[];do{U=a.readUshort(n,o),o+=2;var m={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(m),m.glyphIndex=a.readUshort(n,o),o+=2,1&U){var S=a.readShort(n,o);o+=2;var b=a.readShort(n,o);o+=2}else{S=a.readInt8(n,o);o++;b=a.readInt8(n,o);o++}2&U?(m.m.tx=S,m.m.ty=b):(m.p1=S,m.p2=b),8&U?(m.m.a=m.m.d=a.readF2dot14(n,o),o+=2):64&U?(m.m.a=a.readF2dot14(n,o),o+=2,m.m.d=a.readF2dot14(n,o),o+=2):128&U&&(m.m.a=a.readF2dot14(n,o),o+=2,m.m.b=a.readF2dot14(n,o),o+=2,m.m.c=a.readF2dot14(n,o),o+=2,m.m.d=a.readF2dot14(n,o),o+=2)}while(32&U);if(256&U){var _=a.readUshort(n,o);o+=2,i.instr=[];for(s=0;s<_;s++)i.instr.push(n[o]),o++}}return i},r.GPOS={},r.GPOS.parse=function(t,e,a,n){return r._lctf.parse(t,e,a,n,r.GPOS.subt)},r.GPOS.subt=function(t,e,a){if(2!=e)return null;var n=r._bin,o=a,i={};i.format=n.readUshort(t,a),a+=2;var s=n.readUshort(t,a);a+=2,i.coverage=r._lctf.readCoverage(t,s+o),i.valFmt1=n.readUshort(t,a),a+=2,i.valFmt2=n.readUshort(t,a),a+=2;var h=r._lctf.numOfOnes(i.valFmt1),f=r._lctf.numOfOnes(i.valFmt2);if(1==i.format){i.pairsets=[];var l=n.readUshort(t,a);a+=2;for(var u=0;u<l;u++){var d=n.readUshort(t,a);a+=2,d+=o;var c=n.readUshort(t,d);d+=2;for(var v=[],p=0;p<c;p++){var g=n.readUshort(t,d);d+=2,0!=i.valFmt1&&(y=r._lctf.readValueRecord(t,d,i.valFmt1),d+=2*h),0!=i.valFmt2&&(x=r._lctf.readValueRecord(t,d,i.valFmt2),d+=2*f),v.push({gid2:g,val1:y,val2:x})}i.pairsets.push(v)}}if(2==i.format){var U=n.readUshort(t,a);a+=2;var m=n.readUshort(t,a);a+=2;var S=n.readUshort(t,a);a+=2;var b=n.readUshort(t,a);a+=2,i.classDef1=r._lctf.readClassDef(t,o+U),i.classDef2=r._lctf.readClassDef(t,o+m),i.matrix=[];for(u=0;u<S;u++){var _=[];for(p=0;p<b;p++){var y=null,x=null;0!=i.valFmt1&&(y=r._lctf.readValueRecord(t,a,i.valFmt1),a+=2*h),0!=i.valFmt2&&(x=r._lctf.readValueRecord(t,a,i.valFmt2),a+=2*f),_.push({val1:y,val2:x})}i.matrix.push(_)}}return i},r.GSUB={},r.GSUB.parse=function(t,e,a,n){return r._lctf.parse(t,e,a,n,r.GSUB.subt)},r.GSUB.subt=function(t,e,a){var n=r._bin,o=a,i={};if(1!=e&&4!=e&&5!=e)return null;i.fmt=n.readUshort(t,a),a+=2;var s=n.readUshort(t,a);if(a+=2,i.coverage=r._lctf.readCoverage(t,s+o),1==e){if(1==i.fmt)i.delta=n.readShort(t,a),a+=2;else if(2==i.fmt){var h=n.readUshort(t,a);a+=2,i.newg=n.readUshorts(t,a,h),a+=2*i.newg.length}}else if(4==e){i.vals=[];h=n.readUshort(t,a);a+=2;for(var f=0;f<h;f++){var l=n.readUshort(t,a);a+=2,i.vals.push(r.GSUB.readLigatureSet(t,o+l))}}else if(5==e)if(2==i.fmt){var u=n.readUshort(t,a);a+=2,i.cDef=r._lctf.readClassDef(t,o+u),i.scset=[];var d=n.readUshort(t,a);a+=2;for(f=0;f<d;f++){var c=n.readUshort(t,a);a+=2,i.scset.push(0==c?null:r.GSUB.readSubClassSet(t,o+c))}}else console.log("unknown table format",i.fmt);return i},r.GSUB.readSubClassSet=function(t,e){var a=r._bin.readUshort,n=e,o=[],i=a(t,e);e+=2;for(var s=0;s<i;s++){var h=a(t,e);e+=2,o.push(r.GSUB.readSubClassRule(t,n+h))}return o},r.GSUB.readSubClassRule=function(t,e){var a=r._bin.readUshort,n={},o=a(t,e),i=a(t,e+=2);e+=2,n.input=[];for(var s=0;s<o-1;s++)n.input.push(a(t,e)),e+=2;return n.substLookupRecords=r.GSUB.readSubstLookupRecords(t,e,i),n},r.GSUB.readSubstLookupRecords=function(t,e,a){for(var n=r._bin.readUshort,o=[],i=0;i<a;i++)o.push(n(t,e),n(t,e+2)),e+=4;return o},r.GSUB.readChainSubClassSet=function(t,e){var a=r._bin,n=e,o=[],i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var h=a.readUshort(t,e);e+=2,o.push(r.GSUB.readChainSubClassRule(t,n+h))}return o},r.GSUB.readChainSubClassRule=function(t,e){for(var a=r._bin,n={},o=["backtrack","input","lookahead"],i=0;i<o.length;i++){var s=a.readUshort(t,e);e+=2,1==i&&s--,n[o[i]]=a.readUshorts(t,e,s),e+=2*n[o[i]].length}s=a.readUshort(t,e);return e+=2,n.subst=a.readUshorts(t,e,2*s),e+=2*n.subst.length,n},r.GSUB.readLigatureSet=function(t,e){var a=r._bin,n=e,o=[],i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var h=a.readUshort(t,e);e+=2,o.push(r.GSUB.readLigature(t,n+h))}return o},r.GSUB.readLigature=function(t,e){var a=r._bin,n={chain:[]};n.nglyph=a.readUshort(t,e),e+=2;var o=a.readUshort(t,e);e+=2;for(var i=0;i<o-1;i++)n.chain.push(a.readUshort(t,e)),e+=2;return n},r.head={},r.head.parse=function(t,e,a){var n=r._bin,o={};n.readFixed(t,e);e+=4,o.fontRevision=n.readFixed(t,e),e+=4;n.readUint(t,e);e+=4;n.readUint(t,e);return e+=4,o.flags=n.readUshort(t,e),e+=2,o.unitsPerEm=n.readUshort(t,e),e+=2,o.created=n.readUint64(t,e),e+=8,o.modified=n.readUint64(t,e),e+=8,o.xMin=n.readShort(t,e),e+=2,o.yMin=n.readShort(t,e),e+=2,o.xMax=n.readShort(t,e),e+=2,o.yMax=n.readShort(t,e),e+=2,o.macStyle=n.readUshort(t,e),e+=2,o.lowestRecPPEM=n.readUshort(t,e),e+=2,o.fontDirectionHint=n.readShort(t,e),e+=2,o.indexToLocFormat=n.readShort(t,e),e+=2,o.glyphDataFormat=n.readShort(t,e),e+=2,o},r.hhea={},r.hhea.parse=function(t,e,a){var n=r._bin,o={};n.readFixed(t,e);return e+=4,o.ascender=n.readShort(t,e),e+=2,o.descender=n.readShort(t,e),e+=2,o.lineGap=n.readShort(t,e),e+=2,o.advanceWidthMax=n.readUshort(t,e),e+=2,o.minLeftSideBearing=n.readShort(t,e),e+=2,o.minRightSideBearing=n.readShort(t,e),e+=2,o.xMaxExtent=n.readShort(t,e),e+=2,o.caretSlopeRise=n.readShort(t,e),e+=2,o.caretSlopeRun=n.readShort(t,e),e+=2,o.caretOffset=n.readShort(t,e),e+=2,e+=8,o.metricDataFormat=n.readShort(t,e),e+=2,o.numberOfHMetrics=n.readUshort(t,e),e+=2,o},r.hmtx={},r.hmtx.parse=function(t,e,a,n){for(var o=r._bin,i={aWidth:[],lsBearing:[]},s=0,h=0,f=0;f<n.maxp.numGlyphs;f++)f<n.hhea.numberOfHMetrics&&(s=o.readUshort(t,e),e+=2,h=o.readShort(t,e),e+=2),i.aWidth.push(s),i.lsBearing.push(h);return i},r.kern={},r.kern.parse=function(t,e,a,n){var o=r._bin,i=o.readUshort(t,e);if(e+=2,1==i)return r.kern.parseV1(t,e-2,a,n);var s=o.readUshort(t,e);e+=2;for(var h={glyph1:[],rval:[]},f=0;f<s;f++){e+=2;a=o.readUshort(t,e);e+=2;var l=o.readUshort(t,e);e+=2;var u=l>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;e=r.kern.readFormat0(t,e,h)}return h},r.kern.parseV1=function(t,e,a,n){var o=r._bin;o.readFixed(t,e);e+=4;var i=o.readUint(t,e);e+=4;for(var s={glyph1:[],rval:[]},h=0;h<i;h++){o.readUint(t,e);e+=4;var f=o.readUshort(t,e);e+=2;o.readUshort(t,e);e+=2;var l=f>>>8;if(0!=(l&=15))throw"unknown kern table format: "+l;e=r.kern.readFormat0(t,e,s)}return s},r.kern.readFormat0=function(t,e,a){var n=r._bin,o=-1,i=n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var h=n.readUshort(t,e);e+=2;var f=n.readUshort(t,e);e+=2;var l=n.readShort(t,e);e+=2,h!=o&&(a.glyph1.push(h),a.rval.push({glyph2:[],vals:[]}));var u=a.rval[a.rval.length-1];u.glyph2.push(f),u.vals.push(l),o=h}return e},r.loca={},r.loca.parse=function(t,e,a,n){var o=r._bin,i=[],s=n.head.indexToLocFormat,h=n.maxp.numGlyphs+1;if(0==s)for(var f=0;f<h;f++)i.push(o.readUshort(t,e+(f<<1))<<1);if(1==s)for(f=0;f<h;f++)i.push(o.readUint(t,e+(f<<2)));return i},r.maxp={},r.maxp.parse=function(t,e,a){var n=r._bin,o={},i=n.readUint(t,e);return e+=4,o.numGlyphs=n.readUshort(t,e),e+=2,65536==i&&(o.maxPoints=n.readUshort(t,e),e+=2,o.maxContours=n.readUshort(t,e),e+=2,o.maxCompositePoints=n.readUshort(t,e),e+=2,o.maxCompositeContours=n.readUshort(t,e),e+=2,o.maxZones=n.readUshort(t,e),e+=2,o.maxTwilightPoints=n.readUshort(t,e),e+=2,o.maxStorage=n.readUshort(t,e),e+=2,o.maxFunctionDefs=n.readUshort(t,e),e+=2,o.maxInstructionDefs=n.readUshort(t,e),e+=2,o.maxStackElements=n.readUshort(t,e),e+=2,o.maxSizeOfInstructions=n.readUshort(t,e),e+=2,o.maxComponentElements=n.readUshort(t,e),e+=2,o.maxComponentDepth=n.readUshort(t,e),e+=2),o},r.name={},r.name.parse=function(t,e,a){var n=r._bin,o={};n.readUshort(t,e);e+=2;var i=n.readUshort(t,e);e+=2;n.readUshort(t,e);for(var s,h=e+=2,f=0;f<i;f++){var l=n.readUshort(t,e);e+=2;var u=n.readUshort(t,e);e+=2;var d=n.readUshort(t,e);e+=2;var c=n.readUshort(t,e);e+=2;a=n.readUshort(t,e);e+=2;var v=n.readUshort(t,e);e+=2;var p="p"+l;null==o[p]&&(o[p]={});var g,U=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"][c],m=h+12*i+v;if(0==l)g=n.readUnicode(t,m,a/2);else if(3==l&&0==u)g=n.readUnicode(t,m,a/2);else if(0==u)g=n.readASCII(t,m,a);else if(1==u)g=n.readUnicode(t,m,a/2);else if(3==u)g=n.readUnicode(t,m,a/2);else{if(1!=l)throw"unknown encoding "+u+", platformID: "+l;g=n.readASCII(t,m,a),console.log("reading unknown MAC encoding "+u+" as ASCII")}o[p][U]=g,o[p]._lang=d}for(var S in o)if(null!=o[S].postScriptName&&1033==o[S]._lang)return o[S];for(var S in o)if(null!=o[S].postScriptName&&3084==o[S]._lang)return o[S];for(var S in o)if(null!=o[S].postScriptName)return o[S];for(var S in o){s=S;break}return console.log("returning name table with languageID "+o[s]._lang),o[s]},r["OS/2"]={},r["OS/2"].parse=function(t,e,a){var n=r._bin.readUshort(t,e);e+=2;var o={};if(0==n)r["OS/2"].version0(t,e,o);else if(1==n)r["OS/2"].version1(t,e,o);else if(2==n||3==n||4==n)r["OS/2"].version2(t,e,o);else{if(5!=n)throw"unknown OS/2 table version: "+n;r["OS/2"].version5(t,e,o)}return o},r["OS/2"].version0=function(t,e,a){var n=r._bin;return a.xAvgCharWidth=n.readShort(t,e),e+=2,a.usWeightClass=n.readUshort(t,e),e+=2,a.usWidthClass=n.readUshort(t,e),e+=2,a.fsType=n.readUshort(t,e),e+=2,a.ySubscriptXSize=n.readShort(t,e),e+=2,a.ySubscriptYSize=n.readShort(t,e),e+=2,a.ySubscriptXOffset=n.readShort(t,e),e+=2,a.ySubscriptYOffset=n.readShort(t,e),e+=2,a.ySuperscriptXSize=n.readShort(t,e),e+=2,a.ySuperscriptYSize=n.readShort(t,e),e+=2,a.ySuperscriptXOffset=n.readShort(t,e),e+=2,a.ySuperscriptYOffset=n.readShort(t,e),e+=2,a.yStrikeoutSize=n.readShort(t,e),e+=2,a.yStrikeoutPosition=n.readShort(t,e),e+=2,a.sFamilyClass=n.readShort(t,e),e+=2,a.panose=n.readBytes(t,e,10),e+=10,a.ulUnicodeRange1=n.readUint(t,e),e+=4,a.ulUnicodeRange2=n.readUint(t,e),e+=4,a.ulUnicodeRange3=n.readUint(t,e),e+=4,a.ulUnicodeRange4=n.readUint(t,e),e+=4,a.achVendID=[n.readInt8(t,e),n.readInt8(t,e+1),n.readInt8(t,e+2),n.readInt8(t,e+3)],e+=4,a.fsSelection=n.readUshort(t,e),e+=2,a.usFirstCharIndex=n.readUshort(t,e),e+=2,a.usLastCharIndex=n.readUshort(t,e),e+=2,a.sTypoAscender=n.readShort(t,e),e+=2,a.sTypoDescender=n.readShort(t,e),e+=2,a.sTypoLineGap=n.readShort(t,e),e+=2,a.usWinAscent=n.readUshort(t,e),e+=2,a.usWinDescent=n.readUshort(t,e),e+=2},r["OS/2"].version1=function(t,e,a){var n=r._bin;return e=r["OS/2"].version0(t,e,a),a.ulCodePageRange1=n.readUint(t,e),e+=4,a.ulCodePageRange2=n.readUint(t,e),e+=4},r["OS/2"].version2=function(t,e,a){var n=r._bin;return e=r["OS/2"].version1(t,e,a),a.sxHeight=n.readShort(t,e),e+=2,a.sCapHeight=n.readShort(t,e),e+=2,a.usDefault=n.readUshort(t,e),e+=2,a.usBreak=n.readUshort(t,e),e+=2,a.usMaxContext=n.readUshort(t,e),e+=2},r["OS/2"].version5=function(t,e,a){var n=r._bin;return e=r["OS/2"].version2(t,e,a),a.usLowerOpticalPointSize=n.readUshort(t,e),e+=2,a.usUpperOpticalPointSize=n.readUshort(t,e),e+=2},r.post={},r.post.parse=function(t,e,a){var n=r._bin,o={};return o.version=n.readFixed(t,e),e+=4,o.italicAngle=n.readFixed(t,e),e+=4,o.underlinePosition=n.readShort(t,e),e+=2,o.underlineThickness=n.readShort(t,e),e+=2,o},r.SVG={},r.SVG.parse=function(t,e,a){var n=r._bin,o={entries:[]},i=e;n.readUshort(t,e);e+=2;var s=n.readUint(t,e);e+=4;n.readUint(t,e);e+=4,e=s+i;var h=n.readUshort(t,e);e+=2;for(var f=0;f<h;f++){var l=n.readUshort(t,e);e+=2;var u=n.readUshort(t,e);e+=2;var d=n.readUint(t,e);e+=4;var c=n.readUint(t,e);e+=4;for(var v=new Uint8Array(t.buffer,i+d+s,c),p=n.readUTF8(v,0,v.length),g=l;g<=u;g++)o.entries[g]=p}return o},r.SVG.toPath=function(t){var e={cmds:[],crds:[]};if(null==t)return e;for(var a=(new DOMParser).parseFromString(t,"image/svg+xml").firstChild;"svg"!=a.tagName;)a=a.nextSibling;var n=a.getAttribute("viewBox");n=n?n.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],r.SVG._toPath(a.children,e);for(var o=0;o<e.crds.length;o+=2){var i=e.crds[o],s=e.crds[o+1];i-=n[0],s=-(s-=n[1]),e.crds[o]=i,e.crds[o+1]=s}return e},r.SVG._toPath=function(t,e,a){for(var n=0;n<t.length;n++){var o=t[n],i=o.tagName,s=o.getAttribute("fill");if(null==s&&(s=a),"g"==i)r.SVG._toPath(o.children,e,s);else if("path"==i){e.cmds.push(s||"#000000");var h=o.getAttribute("d"),f=r.SVG._tokens(h);r.SVG._toksToPath(f,e),e.cmds.push("X")}else"defs"==i||console.log(i,o)}},r.SVG._tokens=function(r){for(var t=[],e=0,a=!1,n="";e<r.length;){var o=r.charCodeAt(e),i=r.charAt(e);e++;var s=48<=o&&o<=57||"."==i||"-"==i;a?"-"==i?(t.push(parseFloat(n)),n=i):s?n+=i:(t.push(parseFloat(n)),","!=i&&" "!=i&&t.push(i),a=!1):s?(n=i,a=!0):","!=i&&" "!=i&&t.push(i)}return a&&t.push(parseFloat(n)),t},r.SVG._toksToPath=function(t,e){for(var a=0,n=0,o=0,i=0,s=0,h={M:2,L:2,H:1,V:1,S:4,C:6},f=e.cmds,l=e.crds;a<t.length;){var u=t[a];if(a++,"z"==u)f.push("Z"),n=i,o=s;else for(var d=u.toUpperCase(),c=h[d],v=r.SVG._reps(t,a,c),p=0;p<v;p++){var g=0,U=0;if(u!=d&&(g=n,U=o),"M"==d)n=g+t[a++],o=U+t[a++],f.push("M"),l.push(n,o),i=n,s=o;else if("L"==d)n=g+t[a++],o=U+t[a++],f.push("L"),l.push(n,o);else if("H"==d)n=g+t[a++],f.push("L"),l.push(n,o);else if("V"==d)o=U+t[a++],f.push("L"),l.push(n,o);else if("C"==d){var m=g+t[a++],S=U+t[a++],b=g+t[a++],_=U+t[a++],y=g+t[a++],x=U+t[a++];f.push("C"),l.push(m,S,b,_,y,x),n=y,o=x}else if("S"==d){var F=Math.max(l.length-4,0);m=n+n-l[F],S=o+o-l[F+1],b=g+t[a++],_=U+t[a++],y=g+t[a++],x=U+t[a++];f.push("C"),l.push(m,S,b,_,y,x),n=y,o=x}else console.log("Unknown SVG command "+u)}}},r.SVG._reps=function(r,t,e){for(var a=t;a<r.length&&"string"!=typeof r[a];)a+=e;return(a-t)/e},null==r&&(r={}),null==r.U&&(r.U={}),r.U.codeToGlyph=function(r,t){var e=r.cmap,a=-1;if(null!=e.p0e4?a=e.p0e4:null!=e.p3e1?a=e.p3e1:null!=e.p1e0&&(a=e.p1e0),-1==a)throw"no familiar platform and encoding!";var n=e.tables[a];if(0==n.format)return t>=n.map.length?0:n.map[t];if(4==n.format){for(var o=-1,i=0;i<n.endCount.length;i++)if(t<=n.endCount[i]){o=i;break}if(-1==o)return 0;if(n.startCount[o]>t)return 0;return 65535&(0!=n.idRangeOffset[o]?n.glyphIdArray[t-n.startCount[o]+(n.idRangeOffset[o]>>1)-(n.idRangeOffset.length-o)]:t+n.idDelta[o])}if(12==n.format){if(t>n.groups[n.groups.length-1][1])return 0;for(i=0;i<n.groups.length;i++){var s=n.groups[i];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+n.format},r.U.glyphToPath=function(t,e){var a={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var n=t.SVG.entries[e];return null==n?a:("string"==typeof n&&(n=r.SVG.toPath(n),t.SVG.entries[e]=n),n)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1};r.U._drawCFF(t.CFF.CharStrings[e],o,t.CFF,a)}else t.glyf&&r.U._drawGlyf(e,t,a);return a},r.U._drawGlyf=function(t,e,a){var n=e.glyf[t];null==n&&(n=e.glyf[t]=r.glyf._parseGlyf(e,t)),null!=n&&(n.noc>-1?r.U._simpleGlyph(n,a):r.U._compoGlyph(n,e,a))},r.U._simpleGlyph=function(t,e){for(var a=0;a<t.noc;a++){for(var n=0==a?0:t.endPts[a-1]+1,o=t.endPts[a],i=n;i<=o;i++){var s=i==n?o:i-1,h=i==o?n:i+1,f=1&t.flags[i],l=1&t.flags[s],u=1&t.flags[h],d=t.xs[i],c=t.ys[i];if(i==n)if(f){if(!l){r.U.P.moveTo(e,d,c);continue}r.U.P.moveTo(e,t.xs[s],t.ys[s])}else l?r.U.P.moveTo(e,t.xs[s],t.ys[s]):r.U.P.moveTo(e,(t.xs[s]+d)/2,(t.ys[s]+c)/2);f?l&&r.U.P.lineTo(e,d,c):u?r.U.P.qcurveTo(e,d,c,t.xs[h],t.ys[h]):r.U.P.qcurveTo(e,d,c,(d+t.xs[h])/2,(c+t.ys[h])/2)}r.U.P.closePath(e)}},r.U._compoGlyph=function(t,e,a){for(var n=0;n<t.parts.length;n++){var o={cmds:[],crds:[]},i=t.parts[n];r.U._drawGlyf(i.glyphIndex,e,o);for(var s=i.m,h=0;h<o.crds.length;h+=2){var f=o.crds[h],l=o.crds[h+1];a.crds.push(f*s.a+l*s.b+s.tx),a.crds.push(f*s.c+l*s.d+s.ty)}for(h=0;h<o.cmds.length;h++)a.cmds.push(o.cmds[h])}},r.U._getGlyphClass=function(t,e){var a=r._lctf.getInterval(e,t);return-1==a?0:e[a+2]},r.U.getPairAdjustment=function(t,e,a){if(t.GPOS){for(var n=null,o=0;o<t.GPOS.featureList.length;o++){var i=t.GPOS.featureList[o];if("kern"==i.tag)for(var s=0;s<i.tab.length;s++)2==t.GPOS.lookupList[i.tab[s]].ltype&&(n=t.GPOS.lookupList[i.tab[s]])}if(n)for(o=0;o<n.tabs.length;o++){var h=n.tabs[o],f=r._lctf.coverageIndex(h.coverage,e);if(-1!=f){if(1==h.format){var l=h.pairsets[f];for(s=0;s<l.length;s++)l[s].gid2==a&&(c=l[s]);if(null==c)continue}else if(2==h.format)var u=r.U._getGlyphClass(e,h.classDef1),d=r.U._getGlyphClass(a,h.classDef2),c=h.matrix[u][d];return c.val1[2]}}}if(t.kern){var v=t.kern.glyph1.indexOf(e);if(-1!=v){var p=t.kern.rval[v].glyph2.indexOf(a);if(-1!=p)return t.kern.rval[v].vals[p]}}return 0},r.U.stringToGlyphs=function(t,e){for(var a=[],n=0;n<e.length;n++){var o=e.codePointAt(n);o>65535&&n++,a.push(r.U.codeToGlyph(t,o))}var i=t.GSUB;if(null==i)return a;for(var s=i.lookupList,h=i.featureList,f='\n\t" ,.:;!?()  ،',l="آأؤإاةدذرزوٱٲٳٵٶٷڈډڊڋڌڍڎڏڐڑڒړڔڕږڗژڙۀۃۄۅۆۇۈۉۊۋۍۏےۓەۮۯܐܕܖܗܘܙܞܨܪܬܯݍݙݚݛݫݬݱݳݴݸݹࡀࡆࡇࡉࡔࡧࡩࡪࢪࢫࢬࢮࢱࢲࢹૅેૉ૊૎૏ૐ૑૒૝ૡ૤૯஁ஃ஄அஉ஌எஏ஑னப஫஬",u=0;u<a.length;u++){var d=a[u],c=0==u||-1!=f.indexOf(e[u-1]),v=u==a.length-1||-1!=f.indexOf(e[u+1]);c||-1==l.indexOf(e[u-1])||(c=!0),v||-1==l.indexOf(e[u])||(v=!0),v||-1=="ꡲ્૗".indexOf(e[u+1])||(v=!0),c||-1=="ꡲ્૗".indexOf(e[u])||(c=!0);var p=null;p=c?v?"isol":"init":v?"fina":"medi";for(var g=0;g<h.length;g++)if(h[g].tag==p)for(var U=0;U<h[g].tab.length;U++){1==(_=s[h[g].tab[U]]).ltype&&r.U._applyType1(a,u,_)}}var m=["rlig","liga","mset"];for(u=0;u<a.length;u++){d=a[u];var S=Math.min(3,a.length-u-1);for(g=0;g<h.length;g++){var b=h[g];if(-1!=m.indexOf(b.tag))for(U=0;U<b.tab.length;U++)for(var _=s[b.tab[U]],y=0;y<_.tabs.length;y++)if(null!=_.tabs[y]){var x=r._lctf.coverageIndex(_.tabs[y].coverage,d);if(-1!=x)if(4==_.ltype)for(var F=_.tabs[y].vals[x],C=0;C<F.length;C++){var P=F[C],T=P.chain.length;if(!(T>S)){for(var w=!0,G=0;G<T;G++)P.chain[G]!=a[u+(1+G)]&&(w=!1);if(w){a[u]=P.nglyph;for(G=0;G<T;G++)a[u+G+1]=-1}}}else if(5==_.ltype){var k=_.tabs[y];if(2!=k.fmt)continue;var O=r._lctf.getInterval(k.cDef,d),I=k.cDef[O+2],A=k.scset[I];for(n=0;n<A.length;n++){var B=A[n],L=B.input;if(!(L.length>S)){for(w=!0,G=0;G<L.length;G++){var z=r._lctf.getInterval(k.cDef,a[u+1+G]);if(-1==O&&k.cDef[z+2]!=L[G]){w=!1;break}}if(w){var D=B.substLookupRecords;for(C=0;C<D.length;C+=2)D[C],D[C+1]}}}}}}}return a},r.U._applyType1=function(t,e,a){for(var n=t[e],o=0;o<a.tabs.length;o++){var i=a.tabs[o],s=r._lctf.coverageIndex(i.coverage,n);-1!=s&&(1==i.fmt?t[e]=t[e]+i.delta:t[e]=i.newg[s])}},r.U.glyphsToPath=function(t,e,a){for(var n={cmds:[],crds:[]},o=0,i=0;i<e.length;i++){var s=e[i];if(-1!=s){for(var h=i<e.length-1&&-1!=e[i+1]?e[i+1]:0,f=r.U.glyphToPath(t,s),l=0;l<f.crds.length;l+=2)n.crds.push(f.crds[l]+o),n.crds.push(f.crds[l+1]);a&&n.cmds.push(a);for(l=0;l<f.cmds.length;l++)n.cmds.push(f.cmds[l]);a&&n.cmds.push("X"),o+=t.hmtx.aWidth[s],i<e.length-1&&(o+=r.U.getPairAdjustment(t,s,h))}}return n},r.U.pathToSVG=function(r,t){null==t&&(t=5);for(var e=[],a=0,n={M:2,L:2,Q:4,C:6},o=0;o<r.cmds.length;o++){var i=r.cmds[o],s=a+(n[i]?n[i]:0);for(e.push(i);a<s;){var h=r.crds[a++];e.push(parseFloat(h.toFixed(t))+(a==s?"":" "))}}return e.join("")},r.U.pathToContext=function(r,t){for(var e=0,a=r.crds,n=0;n<r.cmds.length;n++){var o=r.cmds[n];"M"==o?(t.moveTo(a[e],a[e+1]),e+=2):"L"==o?(t.lineTo(a[e],a[e+1]),e+=2):"C"==o?(t.bezierCurveTo(a[e],a[e+1],a[e+2],a[e+3],a[e+4],a[e+5]),e+=6):"Q"==o?(t.quadraticCurveTo(a[e],a[e+1],a[e+2],a[e+3]),e+=4):"#"==o.charAt(0)?(t.beginPath(),t.fillStyle=o):"Z"==o?t.closePath():"X"==o&&t.fill()}},r.U.P={},r.U.P.moveTo=function(r,t,e){r.cmds.push("M"),r.crds.push(t,e)},r.U.P.lineTo=function(r,t,e){r.cmds.push("L"),r.crds.push(t,e)},r.U.P.curveTo=function(r,t,e,a,n,o,i){r.cmds.push("C"),r.crds.push(t,e,a,n,o,i)},r.U.P.qcurveTo=function(r,t,e,a,n){r.cmds.push("Q"),r.crds.push(t,e,a,n)},r.U.P.closePath=function(r){r.cmds.push("Z")},r.U._drawCFF=function(t,e,a,n){for(var o=e.stack,i=e.nStems,s=e.haveWidth,h=e.width,f=e.open,l=0,u=e.x,d=e.y,c=0,v=0,p=0,g=0,U=0,m=0,S=0,b=0,_=0,y=0,x={val:0,size:0};l<t.length;){r.CFF.getCharString(t,l,x);var F=x.val;if(l+=x.size,"o1"==F||"o18"==F)o.length%2!=0&&!s&&(h=o.shift()+a.Private.nominalWidthX),i+=o.length>>1,o.length=0,s=!0;else if("o3"==F||"o23"==F){o.length%2!=0&&!s&&(h=o.shift()+a.Private.nominalWidthX),i+=o.length>>1,o.length=0,s=!0}else if("o4"==F)o.length>1&&!s&&(h=o.shift()+a.Private.nominalWidthX,s=!0),f&&r.U.P.closePath(n),d+=o.pop(),r.U.P.moveTo(n,u,d),f=!0;else if("o5"==F)for(;o.length>0;)u+=o.shift(),d+=o.shift(),r.U.P.lineTo(n,u,d);else if("o6"==F||"o7"==F)for(var C=o.length,P="o6"==F,T=0;T<C;T++){var w=o.shift();P?u+=w:d+=w,P=!P,r.U.P.lineTo(n,u,d)}else if("o8"==F||"o24"==F){C=o.length;for(var G=0;G+6<=C;)c=u+o.shift(),v=d+o.shift(),p=c+o.shift(),g=v+o.shift(),u=p+o.shift(),d=g+o.shift(),r.U.P.curveTo(n,c,v,p,g,u,d),G+=6;"o24"==F&&(u+=o.shift(),d+=o.shift(),r.U.P.lineTo(n,u,d))}else{if("o11"==F)break;if("o1234"==F||"o1235"==F||"o1236"==F||"o1237"==F)"o1234"==F&&(v=d,p=(c=u+o.shift())+o.shift(),y=g=v+o.shift(),m=g,b=d,u=(S=(U=(_=p+o.shift())+o.shift())+o.shift())+o.shift(),r.U.P.curveTo(n,c,v,p,g,_,y),r.U.P.curveTo(n,U,m,S,b,u,d)),"o1235"==F&&(c=u+o.shift(),v=d+o.shift(),p=c+o.shift(),g=v+o.shift(),_=p+o.shift(),y=g+o.shift(),U=_+o.shift(),m=y+o.shift(),S=U+o.shift(),b=m+o.shift(),u=S+o.shift(),d=b+o.shift(),o.shift(),r.U.P.curveTo(n,c,v,p,g,_,y),r.U.P.curveTo(n,U,m,S,b,u,d)),"o1236"==F&&(c=u+o.shift(),v=d+o.shift(),p=c+o.shift(),y=g=v+o.shift(),m=g,S=(U=(_=p+o.shift())+o.shift())+o.shift(),b=m+o.shift(),u=S+o.shift(),r.U.P.curveTo(n,c,v,p,g,_,y),r.U.P.curveTo(n,U,m,S,b,u,d)),"o1237"==F&&(c=u+o.shift(),v=d+o.shift(),p=c+o.shift(),g=v+o.shift(),_=p+o.shift(),y=g+o.shift(),U=_+o.shift(),m=y+o.shift(),S=U+o.shift(),b=m+o.shift(),Math.abs(S-u)>Math.abs(b-d)?u=S+o.shift():d=b+o.shift(),r.U.P.curveTo(n,c,v,p,g,_,y),r.U.P.curveTo(n,U,m,S,b,u,d));else if("o14"==F){if(o.length>0&&!s&&(h=o.shift()+a.nominalWidthX,s=!0),4==o.length){var k=o.shift(),O=o.shift(),I=o.shift(),A=o.shift(),B=r.CFF.glyphBySE(a,I),L=r.CFF.glyphBySE(a,A);r.U._drawCFF(a.CharStrings[B],e,a,n),e.x=k,e.y=O,r.U._drawCFF(a.CharStrings[L],e,a,n)}f&&(r.U.P.closePath(n),f=!1)}else if("o19"==F||"o20"==F){o.length%2!=0&&!s&&(h=o.shift()+a.Private.nominalWidthX),i+=o.length>>1,o.length=0,s=!0,l+=i+7>>3}else if("o21"==F)o.length>2&&!s&&(h=o.shift()+a.Private.nominalWidthX,s=!0),d+=o.pop(),u+=o.pop(),f&&r.U.P.closePath(n),r.U.P.moveTo(n,u,d),f=!0;else if("o22"==F)o.length>1&&!s&&(h=o.shift()+a.Private.nominalWidthX,s=!0),u+=o.pop(),f&&r.U.P.closePath(n),r.U.P.moveTo(n,u,d),f=!0;else if("o25"==F){for(;o.length>6;)u+=o.shift(),d+=o.shift(),r.U.P.lineTo(n,u,d);c=u+o.shift(),v=d+o.shift(),p=c+o.shift(),g=v+o.shift(),u=p+o.shift(),d=g+o.shift(),r.U.P.curveTo(n,c,v,p,g,u,d)}else if("o26"==F)for(o.length%2&&(u+=o.shift());o.length>0;)c=u,v=d+o.shift(),u=p=c+o.shift(),d=(g=v+o.shift())+o.shift(),r.U.P.curveTo(n,c,v,p,g,u,d);else if("o27"==F)for(o.length%2&&(d+=o.shift());o.length>0;)v=d,p=(c=u+o.shift())+o.shift(),g=v+o.shift(),u=p+o.shift(),d=g,r.U.P.curveTo(n,c,v,p,g,u,d);else if("o10"==F||"o29"==F){var z="o10"==F?a.Private:a;if(0==o.length)console.log("error: empty stack");else{var D=o.pop(),R=z.Subrs[D+z.Bias];e.x=u,e.y=d,e.nStems=i,e.haveWidth=s,e.width=h,e.open=f,r.U._drawCFF(R,e,a,n),u=e.x,d=e.y,i=e.nStems,s=e.haveWidth,h=e.width,f=e.open}}else if("o30"==F||"o31"==F){var M=o.length,V=(G=0,"o31"==F);for(G+=M-(C=-3&M);G<C;)V?(v=d,p=(c=u+o.shift())+o.shift(),d=(g=v+o.shift())+o.shift(),C-G==5?(u=p+o.shift(),G++):u=p,V=!1):(c=u,v=d+o.shift(),p=c+o.shift(),g=v+o.shift(),u=p+o.shift(),C-G==5?(d=g+o.shift(),G++):d=g,V=!0),r.U.P.curveTo(n,c,v,p,g,u,d),G+=4}else{if("o"==(F+"").charAt(0))throw console.log("Unknown operation: "+F,t),F;o.push(F)}}}e.x=u,e.y=d,e.nStems=i,e.haveWidth=s,e.width=h,e.open=f};var t=r,e=/\r?\n/;function a(r){var t=function(t){function e(e){var a=(e=r.extend({font:null,value:"",fontSize:64,textAlign:"left",textBaseline:"bottom"},e)).font,n=e.value,o=e.fontSize,i=e.textAlign,s=e.textBaseline,h=function(r,t){var e={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&-1===t.indexOf(a)&&(e[a]=r[a]);return e}(e,["font","value","fontSize","textAlign","textBaseline"]);t.call(this,Object.assign({},h,{closed:!0,visible:!1,path:[{}]})),this._font=null,this._value=n,this._fontSize=o,this._textAlign=i,this._textBaseline=s,this.font=a}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var a={font:{configurable:!0},value:{configurable:!0},fontSize:{configurable:!0},textAlign:{configurable:!0},textBaseline:{configurable:!0}};return e.prototype.updateText=function(){var r=this.font.getTextPath(this.value,this.fontSize,0,0,0,this.textAlign,this.textBaseline);0==r.length?(this.path=[{}],this.visible=!1):(this.path=r,this.visible=!0),this.updatePath()},a.font.set=function(r){var t=this;this._font=r,this.font.waitForLoad().then((function(){t.updateText(),t.visible=!0;for(var r=t.addTo;void 0!==r.addTo;)r=r.addTo;r&&"function"==typeof r.updateRenderGraph&&r.updateRenderGraph()}))},a.font.get=function(){return this._font},a.value.set=function(r){this._value=r,this.updateText()},a.value.get=function(){return this._value},a.fontSize.set=function(r){this._fontSize=r,this.updateText()},a.fontSize.get=function(){return this._fontSize},a.textAlign.set=function(r){this._textAlign=r,this.updateText()},a.textAlign.get=function(){return this._textAlign},a.textBaseline.set=function(r){this._textBaseline=r,this.updateText()},a.textBaseline.get=function(){return this._textBaseline},Object.defineProperties(e.prototype,a),e}(r.Shape);return t.optionKeys=t.optionKeys.concat(["font","fontSize","value","textAlign","textBaseline"]),r.Text=t,r}function n(r){var t=function(t){function e(e){var a=(e=r.extend({font:null,value:"",fontSize:64,textAlign:"left",textBaseline:"bottom",color:"#333",fill:!1,stroke:1},e)).font,n=e.value,o=e.fontSize,i=e.textAlign,s=e.textBaseline,h=e.color,f=e.fill,l=e.stroke,u=function(r,t){var e={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&-1===t.indexOf(a)&&(e[a]=r[a]);return e}(e,["font","value","fontSize","textAlign","textBaseline","color","fill","stroke"]);t.call(this,Object.assign({},u,{visible:!1})),this._font=null,this._value=n,this._fontSize=o,this._textAlign=i,this._textBaseline=s,this._color=h,this._fill=f,this._stroke=l,this.font=a}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var a={font:{configurable:!0},value:{configurable:!0},fontSize:{configurable:!0},textAlign:{configurable:!0},textBaseline:{configurable:!0},color:{configurable:!0},fill:{configurable:!0},stroke:{configurable:!0}};return e.prototype.updateText=function(){for(var t=this;this.children.length>0;)this.removeChild(this.children[0]);this.font.getTextGlyphs(this.value,this.fontSize,0,0,0,this.textAlign,this.textBaseline).filter((function(r){return r.path.length>0})).forEach((function(e){t.addChild(new r.Shape({translate:e.translate,path:e.path,color:t.color,fill:t.fill,stroke:t.stroke,closed:!0}))})),this.updateFlatGraph()},a.font.set=function(r){var t=this;this._font=r,this._font.waitForLoad().then((function(){t.updateText(),t.visible=!0;for(var r=t.addTo;void 0!==r.addTo;)r=r.addTo;r&&"function"==typeof r.updateRenderGraph&&r.updateRenderGraph()}))},a.font.get=function(){return this._font},a.value.set=function(r){this._value=r,this.updateText()},a.value.get=function(){return this._value},a.fontSize.set=function(r){this._fontSize=r,this.updateText()},a.fontSize.get=function(){return this._fontSize},a.textAlign.set=function(r){this._textAlign=r,this.updateText()},a.textAlign.get=function(){return this._textAlign},a.textBaseline.set=function(r){this._textBaseline=r,this.updateText()},a.textBaseline.get=function(){return this._textBaseline},a.color.set=function(r){this._color=r,this.children.forEach((function(t){return t.color=r}))},a.color.get=function(){return this._color},a.fill.set=function(r){this._fill=r,this.children.forEach((function(t){return t.fill=r}))},a.fill.get=function(){return this._fill},a.stroke.set=function(r){this._stroke=r,this.children.forEach((function(t){return t.stroke=r}))},a.stroke.get=function(){return this._stroke},Object.defineProperties(e.prototype,a),e}(r.Group);return t.optionKeys=t.optionKeys.concat(["color","fill","stroke","font","fontSize","value","textAlign","textBaseline"]),r.TextGroup=t,r}var o={init:function(r){return r.FontList=[],r.waitForFonts=function(){return Promise.all(r.FontList.map((function(r){return r.waitForLoad()})))},function(r){var a=function(e){var a=this;e=r.extend({src:""},e),this.src=e.src,this.font=null,this._hasLoaded=!1,this._loadCallbacks=[],r.FontList.push(this),this._fetchFontResource(this.src).then((function(r){var e=t.parse(r);if(!(e.head&&e.hmtx&&e.hhea&&e.glyf)){var a=["head","hmtx","hhea","glyf"].filter((function(r){return!e[r]}));throw new Error("Typr.js could not parse this font (unable to find "+a.join(", ")+")")}return e})).then((function(r){a.font=r,a._hasLoaded=!0,a._loadCallbacks.forEach((function(r){return r()}))})).catch((function(r){throw new Error("Unable to load font from "+a.src+":\n"+r)}))};a.prototype.waitForLoad=function(){var r=this;return new Promise((function(t,e){r._hasLoaded&&r._hasLoaded?t():r._loadCallbacks.push(t)}))},a.prototype.getFontScale=function(r){return this._hasLoaded?1/this.font.head.unitsPerEm*r:null},a.prototype.measureText=function(r,a){var n=this;if(void 0===a&&(a=64),!this._hasLoaded)return null;var o=Array.isArray(r)?r:r.split(e),i=this.font,s=i.hmtx.aWidth,h=this.getFontScale(a),f=i.hhea.descender,l=i.hhea.ascender,u=(i.hhea.lineGap,o.map((function(r){return t.U.stringToGlyphs(n.font,r).reduce((function(r,t){return t>-1&&t<s.length&&(r+=s[t]),r}),0)}))),d=Math.max.apply(Math,u),c=0-f+l,v=c*o.length;return{width:d*h,height:v*h,lineHeight:c*h,lineWidths:u.map((function(r){return r*h})),descender:f*h,ascender:l*h}},a.prototype.getTextPath=function(r,a,n,o,i,s,h){var f=this;if(void 0===a&&(a=64),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s="left"),void 0===h&&(h="bottom"),!this._hasLoaded)return[];var l=Array.isArray(r)?r:r.split(e),u=this.measureText(r,a),d=u.lineWidths,c=u.lineHeight;return l.map((function(r,e){var l=f.getTextOrigin(Object.assign({},u,{width:d[e]}),n,o,i,s,h),v=l[0],p=l[1];l[2];o+=c;var g=t.U.stringToGlyphs(f.font,r),U=t.U.glyphsToPath(f.font,g);return f._convertPathCommands(U,a,v,p,i)})).flat()},a.prototype.getTextGlyphs=function(r,a,n,o,i,s,h){var f=this;if(void 0===a&&(a=64),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s="left"),void 0===h&&(h="bottom"),!this._hasLoaded)return[];var l=this.measureText(r,a),u=this.font.hmtx.aWidth,d=this.getFontScale(a),c=l.lineWidths,v=l.lineHeight;return(Array.isArray(r)?r:r.split(e)).map((function(r,e){var p=t.U.stringToGlyphs(f.font,r),g=f.getTextOrigin(Object.assign({},l,{width:c[e]}),n,o,i,s,h),U=g[0],m=g[1],S=g[2];return o+=v,p.filter((function(r){return-1!==r})).map((function(r){var e=t.U.glyphToPath(f.font,r),n={translate:{x:U,y:m,z:S},path:f._convertPathCommands(e,a,0,0,0)};return U+=u[r]*d,n}))})).flat()},a.prototype.getTextOrigin=function(r,t,e,a,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===a&&(a=0),void 0===n&&(n="left"),void 0===o&&(o="bottom");var i=r.width,s=r.height,h=r.lineHeight;switch(n){case"right":t-=i;break;case"center":t-=i/2}switch(o){case"middle":e-=s/2-h;break;case"bottom":default:e-=s-h}return[t,e,a]},a.prototype._convertPathCommands=function(r,t,e,a,n){void 0===e&&(e=0),void 0===a&&(a=0),void 0===n&&(n=0);var o=this.getFontScale(t),i=r.cmds,s=r.crds.map((function(r){return r*o})),h=null,f=0;return i.map((function(r){var t=null;switch(h||(h={x:e+1*s[f],y:a+-1*s[f+1],z:n}),r){case"M":return t={move:{x:e+1*s[f],y:a+-1*s[f+1],z:n}},f+=2,t;case"L":return t={line:{x:e+1*s[f],y:a+-1*s[f+1],z:n}},f+=2,t;case"C":return t={bezier:[{x:e+1*s[f],y:a+-1*s[f+1],z:n},{x:e+1*s[f+2],y:a+-1*s[f+3],z:n},{x:e+1*s[f+4],y:a+-1*s[f+5],z:n}]},f+=6,t;case"Q":return t={arc:[{x:e+1*s[f],y:a+-1*s[f+1],z:n},{x:e+1*s[f+2],y:a+-1*s[f+3],z:n}]},f+=4,t;case"Z":return h&&(t={line:h},h=null),t;default:return t}})).filter((function(r){return null!==r}))},a.prototype._fetchFontResource=function(r){return new Promise((function(t,e){var a=new XMLHttpRequest;a.responseType="arraybuffer",a.open("GET",r,!0),a.onreadystatechange=function(r){4===a.readyState&&(a.status>=200&&a.status<300?t(a.response):e("HTTP error "+a.status+": "+a.statusText))},a.send(null)}))},r.Font=a}(r),a(r),n(r),r},version:"1.2.7"};export default o;

